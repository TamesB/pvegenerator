{% extends "layout_syn.html" %}

{% load semanticui %}
{% load static %}
{% load custom_tags %}

{% block menu %}
{% if request.user.type_user == 'SOG' %}
{% include 'Menu.html' with type='manager' %}
{% elif request.user.type_user == 'SB' %}
{% include 'Menu.html' with type='beheerder' %}
{% elif request.user.type_user == 'SD' %}
{% include 'Menu.html' with type='derde' %}
{% else %}
{% include 'Menu.html' with type='beheerder' %}
{% endif %}
{% endblock %}

{% block main %}
<div class="general_title"><img src="{% static 'syntrus/img/accountsderden.png'%}" class="title_img"></img><p>Alle opmerkingen, project {{ project.naam }} 
{% if project.frozenLevel == 0 %}
{% if aantal_opmerkingen_gedaan == 4 %}
<input type="button" class="{{ progress }}" onClick="javascript:location.href='{% url 'firstfreeze_syn' project.id %}';" value="Freeze opmerkingen ({{ aantal_opmerkingen_gedaan }} / {{ items|length }})"></input></p></div>
{% else %}
<input type="button" class="{{ progress }}" disabled onClick="javascript:location.href='#';" value="Freeze opmerkingen ({{ aantal_opmerkingen_gedaan }} / {{ items|length }})"></input></p></div>
{% endif %}
{% else %}
<input type="button" class="{{ progress }}" disabled onClick="javascript:location.href='#';" value="{{ aantal_opmerkingen_gedaan }} opmerkingen bevroren"></input></p></div>
{% endif %}

{% if comments %}
<table class="opmerkingtable_wrapper">
  <tr class="table_head">
    <th><img src="{% static 'syntrus/svg/logo.svg' %}" class="syntr_logo"></a></th>
    <th><p>Opmerking</p></th>
    <th><p>Gebruiker</p></th>
    <th><p>Status</p></th>
    <th><p>Kostenverschil</p></th>
    <th><p>Bijlage</p></th>
  </tr>
  {% for comment in comments %}
  <tr class="table_content">
    <td class="inhoud_box"><p>{{ comment.item.inhoud }}</p></td>
    <td class="voldoening"><p>{% if comment.annotation %}{{ comment.annotation }}{% else %}<i>Geen</i>{% endif %}</p></td>
    <td class="voldoening"><p>{% if comment.gebruiker %}{{ comment.gebruiker }}{% else %}<i>Geen</i>{% endif %}</p></td>
    <td class="voldoening"><p>{% if comment.status %}{{ comment.status }}{% else %}&nbsp;{% endif %}</p></td>
    <td class="kosten"><p>{% if comment.kostenConsequenties %}€ {{ comment.kostenConsequenties }}{% else %} € 0 {% endif %}</p></td>
    <td class="voldoening"><p>{% if not comment.bijlage %}<i>Geen</i>{% else %}<a href="{% url 'downloadbijlageaanopmerking_syn' project.id comment.id %}" target="_blank"><button class="ui basic button"><i class="icon download"></i>Download</button></a>{% endif %}</p></td>

  </tr>
  {% endfor %}
  <tr>
    <td class="inhoud_box">&nbsp;</td>
    <td class="voldoening">&nbsp;</td>
    <td class="voldoening">&nbsp;</td>
    <td class="voldoening">&nbsp;</td>
    <td class="kosten"><p>Totaal: {% if totale_kosten %}€{{totale_kosten}}{% else %}€0{% endif %}</p></td>
  </tr>
</table>
{% else %}
<p>Nog geen opmerkingen op het PvE geplaatst!</p>
{% endif %}
{% endblock %}